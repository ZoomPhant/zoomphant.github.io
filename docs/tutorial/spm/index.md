---
layout: default
title: 服务性能监控(SPM)
parent: 教程
nav_order: 3
has_children: true
---

# 服务性能监控(SPM)
{: .header}
---

## 关于服务性能监控(SPM)
前面部分已经解释说明了服务性能监控(Service Performance Monitoring，简写SPM)的含义和主要功能，可参考[服务性能监控(SPM)]({{ site.baseurl }}{% link docs/about/zp/10spm.md %})。

## 服务性能监控(SPM)的组成
在介绍如何创建服务性能监控(SPM)前，先介绍下服务性能监控(SPM)的界面体现，有个总体印象，每个部分的具体细节在后续章节中会详细介绍。

点开任何一个服务，我们会看到像下面的界面

![spm-overview.png](/assets/images/tutorial/spm/spm-overview.png)

这样的界面会呈现出服务的一个或多方面的健康状态，我们称之为健康度：
- 健康度：衡量服务某方面（如用户体验或安全性）状态的一个指标，可以为以下三个值之一：
  - 健康：用绿色表示，此时服务在这个方面一切正常
  - 亚健康：用橙黄色表示，此时服务在这个方面任然可以工作，但可能会影响用户的使用
  - 不健康：用红色表示，此时服务的这个方面已经处于不可用或非常糟糕的状态，整个服务功能都会收到影响，甚至服务不可用

我们会从一下几方面对服务的状态进行评估
- 用户体验：用户在使用服务过程中的体验如何？比如服务的响应速度？功能完备性？是否有一些可能影响服务使用的其它问题（如安全证书等）。
- 服务安全：服务的各个方面的安全状态如何？安全涉及方方面面，我们在评估时会进行全面的安全评估，包括服务的域名安全，链路安全，应用层面的安全，安全隐患等。
- 功能巡检：对服务的关键或重要功能点进行定期监测，确保每项功能的可用性，可靠性和稳定性。

所有这些状态一般由两种控件进行展示
- 当前状态：可以看到服务某个方面当前的状态和过去固定一小时的历史状态及变化
- 历史状态：可以看到服务在更长时间范围的历史状态及变化

### 当前状态
当前状态由类似下面的空间进行展示：

![spm-state-current.png](/assets/images/tutorial/spm/spm-state-current.png)

可以看到，这个空间包括两部分
- 上部分为一个当前状态及状态描述展示区，上图中表明服务的用户体验处于不健康状态，原因是服务现在不可用（返回404）。
- 下部分为一个过去一小时的历史状态及趋势，从左到右一共24个小格，每个小格代表5分钟的归集状态，最右边为最近五分钟的历史状态（包括当前状态），最左边为一个小时前
  - 如果在该五分钟内有不健康的状态，则该小格显示为不健康（红色）
  - 如果在该五分钟内有亚健康的状态，但没有不健康的黄台，则显示为亚健康（橙黄色）
  - 否则显示为绿色，代表在该五分钟内，服务在这方面一切正常，此时显示为健康（绿色）

### 历史状态
历史状态用于展示在更长时间范围的状态变化和趋势，如下图所示:

![spm-state-history.png](/assets/images/tutorial/spm/spm-state-history.png)

历史状态可能包含多个细分项，如上图所示，每个分享被分为24个小格或区域，每个小格或区域从左至右代表在指定时间的归集状态，其含义与定义与**当前状态**中的历史状态部分一致。

在上图中，展示的时间范围为一天，所以我们我们可以看到手机用户过去一天内用户体验从几细分项来说一直都处于健康状态。
